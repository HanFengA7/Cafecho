import{r as C}from"./index-b996fa11.js";import{p as O}from"./request-d135d996.js";import{a6 as q,e as c,ae as B,af as L,ag as y}from"./@ant-design-79c5b16b.js";import{d as R,r as T,f as j,t as E,a0 as I,c as e,u as o,X as r,F as N,_ as V,Y as l,Z as S,I as x}from"./@vue-f4549c4f.js";import{n as f}from"./ant-design-vue-bdf622a3.js";import"./pinia-6e7a6e83.js";import"./vue-router-7a2dbc5b.js";import"./@babel-9393a256.js";import"./resize-observer-polyfill-3d106987.js";import"./@emotion-c0b5c018.js";import"./@ctrl-fb5a5473.js";import"./stylis-af24efd6.js";import"./scroll-into-view-if-needed-6b992d05.js";import"./compute-scroll-into-view-183f845a.js";import"./vue-types-ef06c517.js";import"./dom-align-529d0cdc.js";import"./lodash-es-46efcfe4.js";import"./dayjs-bea8cda3.js";import"./async-validator-dee29e8b.js";import"./throttle-debounce-87e7e444.js";import"./axios-602dd91c.js";import"./axios-4a70c6fc.js";const D=g=>O({url:"api/v1/user/add",data:g}),W={userAddApi:D},X=V("br",null,null,-1),fe=R({__name:"CA_UserAdd",setup(g){const i=T(),h=[{value:1,label:"管理员"},{value:2,label:"订阅者"}],a=j({username:"",password:"",checkpassword:"",email:"",avaterurl:"",role:[]}),w={username:[{required:!0,message:"Please input Activity Username",trigger:"change"},{min:3,max:15,message:"Length should be 3 to 15",trigger:"blur"}],email:[{required:!0,message:"Please input Email",trigger:"change"},{type:"email",message:"Type email",trigger:"blur"}],avaterurl:[{required:!0,message:"Please input AvaterUrl",trigger:"change"},{type:"url",message:"Type url",trigger:"blur"}],password:[{required:!0,validator:async(p,t)=>{var u;return t===""?Promise.reject("Please input the password"):(a.checkpassword!==""&&((u=i.value)==null||u.validateFields("checkpassword")),Promise.resolve())},trigger:"change"},{min:8,message:"Length should be 8",trigger:"blur"}],checkpassword:[{validator:async(p,t)=>t===""?Promise.reject("Please input the password again"):t!==a.password?Promise.reject("Two inputs don't match!"):Promise.resolve(),trigger:"change"},{min:8,message:"Length should be 8",trigger:"blur"}],role:[{required:!0,message:"Please input",trigger:"change"}]},b=p=>{W.userAddApi(p).then(t=>{t.data.status!=200&&f.error({message:"Error",description:t.data.message}),t.data.status==200&&(f.success({message:"Success",description:"添加用户成功！"}),i.value.resetFields())})},P=()=>{f.warn({message:"Warn",description:"请勿提交非法数据！"})},k=()=>{i.value.resetFields()};return E(a),(p,t)=>{const u=l("a-page-header"),m=l("a-tooltip"),d=l("a-input"),n=l("a-form-item"),_=l("a-input-password"),U=l("a-select"),v=l("a-button"),A=l("a-form"),F=l("a-card");return S(),I(N,null,[e(u,{style:{border:"1px solid rgb(235, 237, 240)"},title:"添加用户",onBack:t[0]||(t[0]=()=>o(C).push("Index"))}),X,e(F,{class:"form-center-1"},{default:r(()=>[e(A,{ref_key:"formRef",ref:i,model:a,rules:w,class:"form-center-2",name:"UserAddForm",onFinish:b,onFinishFailed:P},{default:r(()=>[e(n,{name:"username"},{default:r(()=>[e(d,{value:a.username,"onUpdate:value":t[1]||(t[1]=s=>a.username=s),placeholder:"用户名"},{prefix:r(()=>[e(o(q))]),suffix:r(()=>[e(m,{title:"输入用户名"},{default:r(()=>[e(o(c),{style:{color:"rgba(0, 0, 0, 0.45)"}})]),_:1})]),_:1},8,["value"])]),_:1}),e(n,{name:"email",style:{"margin-top":"10px"}},{default:r(()=>[e(d,{value:a.email,"onUpdate:value":t[2]||(t[2]=s=>a.email=s),placeholder:"电子邮箱",style:{"margin-top":"10px"}},{prefix:r(()=>[e(o(B))]),suffix:r(()=>[e(m,{title:"输入电子邮箱"},{default:r(()=>[e(o(c),{style:{color:"rgba(0, 0, 0, 0.45)"}})]),_:1})]),_:1},8,["value"])]),_:1}),e(n,{name:"avaterurl",style:{"margin-top":"10px"}},{default:r(()=>[e(d,{value:a.avaterurl,"onUpdate:value":t[3]||(t[3]=s=>a.avaterurl=s),placeholder:"头像外链",style:{"margin-top":"10px"}},{prefix:r(()=>[e(o(L))]),suffix:r(()=>[e(m,{title:"输入头像外链"},{default:r(()=>[e(o(c),{style:{color:"rgba(0, 0, 0, 0.45)"}})]),_:1})]),_:1},8,["value"])]),_:1}),e(n,{name:"password",style:{"margin-top":"10px"}},{default:r(()=>[e(_,{value:a.password,"onUpdate:value":t[4]||(t[4]=s=>a.password=s),placeholder:"密码"},{prefix:r(()=>[e(o(y))]),_:1},8,["value"])]),_:1}),e(n,{name:"checkpassword",style:{"margin-top":"10px"}},{default:r(()=>[e(_,{value:a.checkpassword,"onUpdate:value":t[5]||(t[5]=s=>a.checkpassword=s),placeholder:"确认密码"},{prefix:r(()=>[e(o(y))]),_:1},8,["value"])]),_:1}),e(n,{name:"role",style:{"margin-top":"10px"}},{default:r(()=>[e(U,{value:a.role,"onUpdate:value":t[6]||(t[6]=s=>a.role=s),options:h,placeholder:"用户权限"},null,8,["value"])]),_:1}),e(n,{"wrapper-col":{span:10,offset:10},style:{"margin-top":"10px"}},{default:r(()=>[e(v,{"html-type":"submit",type:"primary"},{default:r(()=>[x("创建")]),_:1}),e(v,{style:{"margin-left":"10px"},onClick:k},{default:r(()=>[x("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})],64)}}});export{fe as default};
